{
  "version": 3,
  "sources": ["../../runtime-dom/src/nodeOps.ts", "../../runtime-dom/src/modules/patchClass.ts", "../../runtime-dom/src/general.ts", "../../shared/src/utils.ts", "../../runtime-dom/src/modules/patchStyle.ts", "../../runtime-dom/src/modules/patchEvent.ts", "../../runtime-dom/src/modules/patchAttr.ts", "../../runtime-dom/src/patchProp.ts", "../../reactivity/src/system.ts", "../../reactivity/src/effect.ts", "../../reactivity/src/dep.ts", "../../reactivity/src/baseHandlers.ts", "../../reactivity/src/reactive.ts", "../../reactivity/src/ref.ts", "../../reactivity/src/computed.ts", "../../reactivity/src/watch.ts", "../../runtime-core/src/vnode.ts", "../../runtime-core/src/renderer.ts", "../../runtime-core/src/h.ts", "../../runtime-dom/src/index.ts"],
  "sourcesContent": ["import { RendererOptions } from '@vue/runtime-core'\n\nexport const nodeOps: Omit<RendererOptions<Node, Element>, 'patchProp'> = {\n  // \u63D2\u5165\u8282\u70B9\n  insert(el, parent, anchor) {\n    parent.insertBefore(el, anchor || null)\n  },\n  // \u521B\u5EFA\u5143\u7D20\n  createElement(type) {\n    return document.createElement(type)\n  },\n  // \u8BBE\u7F6E\u5185\u5BB9\n  setElementText(el, text) {\n    el.textContent = text\n  },\n  // \u79FB\u9664\u5143\u7D20\n  remove(el) {\n    const parentNode = el.parentNode\n    if (parentNode) {\n      parentNode.removeChild(el)\n    }\n  },\n  // \u521B\u5EFA\u6587\u672C\u8282\u70B9\n  createText(text) {\n    return document.createTextNode(text)\n  },\n  // \u8BBE\u7F6E\u6587\u672C\u8282\u70B9\n  setText(node, text) {\n    return (node.nodeValue = text)\n  },\n  // \u83B7\u53D6\u7236\u8282\u70B9\n  parentNode(el) {\n    return el.parentNode as Element | null\n  },\n  // \u83B7\u53D6\u4E0B\u4E00\u4E2A\u5144\u5F1F\u8282\u70B9\n  nextSibling(el) {\n    return el.nextSibling\n  },\n  // DOM \u67E5\u8BE2\n  querySelector(selector) {\n    return document.querySelector(selector)\n  },\n}\n", "export function patchClass(el, value) {\n  if (value != undefined) {\n    el.className = value\n  } else {\n    el.removeAttribute('class')\n  }\n}\n", "export const isOn = (key: string): boolean =>\n  key.charCodeAt(0) === 111 /* o */ &&\n  key.charCodeAt(1) === 110 /* n */ &&\n  // uppercase letter\n  (key.charCodeAt(2) > 122 || key.charCodeAt(2) < 97)\n", "export const EMPTY_OBJ: { readonly [key: string]: any } = {}\nexport const EMPTY_ARR: readonly [] = Object.freeze([])\n\nexport const NOOP = (): void => {}\n\n/**\n * Always return false.\n */\nexport const NO = () => false\n\nexport const isOn = (key: string): boolean =>\n  key.charCodeAt(0) === 111 /* o */ &&\n  key.charCodeAt(1) === 110 /* n */ &&\n  // uppercase letter\n  (key.charCodeAt(2) > 122 || key.charCodeAt(2) < 97)\n\nexport const isModelListener = (key: string): key is `onUpdate:${string}` =>\n  key.startsWith('onUpdate:')\n\nexport const extend: typeof Object.assign = Object.assign\n\nexport const remove = <T>(arr: T[], el: T): void => {\n  const i = arr.indexOf(el)\n  if (i > -1) {\n    arr.splice(i, 1)\n  }\n}\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty\nexport const hasOwn = (\n  val: object,\n  key: string | symbol,\n): key is keyof typeof val => hasOwnProperty.call(val, key)\n\nexport const isArray: typeof Array.isArray = Array.isArray\nexport const isMap = (val: unknown): val is Map<any, any> =>\n  toTypeString(val) === '[object Map]'\nexport const isSet = (val: unknown): val is Set<any> =>\n  toTypeString(val) === '[object Set]'\n\nexport const isDate = (val: unknown): val is Date =>\n  toTypeString(val) === '[object Date]'\nexport const isRegExp = (val: unknown): val is RegExp =>\n  toTypeString(val) === '[object RegExp]'\nexport const isFunction = (val: unknown): val is Function =>\n  typeof val === 'function'\nexport const isString = (val: unknown): val is string => typeof val === 'string'\nexport const isSymbol = (val: unknown): val is symbol => typeof val === 'symbol'\nexport const isObject = (val: unknown): val is Record<any, any> =>\n  val !== null && typeof val === 'object'\n\nexport const isPromise = <T = any>(val: unknown): val is Promise<T> => {\n  return (\n    (isObject(val) || isFunction(val)) &&\n    isFunction((val as any).then) &&\n    isFunction((val as any).catch)\n  )\n}\n\nexport const objectToString: typeof Object.prototype.toString =\n  Object.prototype.toString\nexport const toTypeString = (value: unknown): string =>\n  objectToString.call(value)\n\nexport const toRawType = (value: unknown): string => {\n  // extract \"RawType\" from strings like \"[object RawType]\"\n  return toTypeString(value).slice(8, -1)\n}\n\nexport const isPlainObject = (val: unknown): val is object =>\n  toTypeString(val) === '[object Object]'\n\nexport const isIntegerKey = (key: unknown): boolean =>\n  isString(key) &&\n  key !== 'NaN' &&\n  key[0] !== '-' &&\n  '' + parseInt(key, 10) === key\n\nconst cacheStringFunction = <T extends (str: string) => string>(fn: T): T => {\n  const cache: Record<string, string> = Object.create(null)\n  return ((str: string) => {\n    const hit = cache[str]\n    return hit || (cache[str] = fn(str))\n  }) as T\n}\n\nconst camelizeRE = /-(\\w)/g\n/**\n * @private\n */\nexport const camelize: (str: string) => string = cacheStringFunction(\n  (str: string): string => {\n    return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''))\n  },\n)\n\nconst hyphenateRE = /\\B([A-Z])/g\n/**\n * @private\n */\nexport const hyphenate: (str: string) => string = cacheStringFunction(\n  (str: string) => str.replace(hyphenateRE, '-$1').toLowerCase(),\n)\n\n/**\n * @private\n */\nexport const capitalize: <T extends string>(str: T) => Capitalize<T> =\n  cacheStringFunction(<T extends string>(str: T) => {\n    return (str.charAt(0).toUpperCase() + str.slice(1)) as Capitalize<T>\n  })\n\n/**\n * @private\n */\nexport const toHandlerKey: <T extends string>(\n  str: T,\n) => T extends '' ? '' : `on${Capitalize<T>}` = cacheStringFunction(\n  <T extends string>(str: T) => {\n    const s = str ? `on${capitalize(str)}` : ``\n    return s as T extends '' ? '' : `on${Capitalize<T>}`\n  },\n)\n\n// compare whether a value has changed, accounting for NaN.\nexport const hasChanged = (value: any, oldValue: any): boolean =>\n  !Object.is(value, oldValue)\n\nexport const invokeArrayFns = (fns: Function[], ...arg: any[]): void => {\n  for (let i = 0; i < fns.length; i++) {\n    fns[i](...arg)\n  }\n}\n\nexport const def = (\n  obj: object,\n  key: string | symbol,\n  value: any,\n  writable = false,\n): void => {\n  Object.defineProperty(obj, key, {\n    configurable: true,\n    enumerable: false,\n    writable,\n    value,\n  })\n}\n\n/**\n * \"123-foo\" will be parsed to 123\n * This is used for the .number modifier in v-model\n */\nexport const looseToNumber = (val: any): any => {\n  const n = parseFloat(val)\n  return isNaN(n) ? val : n\n}\n\n/**\n * Only concerns number-like strings\n * \"123-foo\" will be returned as-is\n */\nexport const toNumber = (val: any): any => {\n  const n = isString(val) ? Number(val) : NaN\n  return isNaN(n) ? val : n\n}\n\n// for typeof global checks without @types/node\ndeclare var global: {}\n\nlet _globalThis: any\nexport const getGlobalThis = (): any => {\n  return (\n    _globalThis ||\n    (_globalThis =\n      typeof globalThis !== 'undefined'\n        ? globalThis\n        : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n              ? global\n              : {})\n  )\n}\n\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/\n\nexport function genPropsAccessExp(name: string): string {\n  return identRE.test(name)\n    ? `__props.${name}`\n    : `__props[${JSON.stringify(name)}]`\n}\n\nexport function genCacheKey(source: string, options: any): string {\n  return (\n    source +\n    JSON.stringify(options, (_, val) =>\n      typeof val === 'function' ? val.toString() : val,\n    )\n  )\n}\n", "import { isString } from '@vue/shared'\n\ntype Style = string | Record<string, string | string[]> | null\n\n/**\n * \u8BBE\u7F6E style\n * @param el\n * @param prev\n * @param next\n */\nexport function patchStyle(el: Element, prev: Style, next: Style): void {\n  const style = (el as HTMLElement).style\n  const isCssString = isString(next)\n  if (next && !isCssString) {\n    if (prev) {\n      if (!isString(prev)) {\n        // { color: 'red' }\n        for (const key in prev) {\n          if (next[key] == null) style[key] = null\n        }\n      } else {\n        // 'color: red'\n        for (const prevStyle of prev.split(';')) {\n          const key = prevStyle.slice(0, prevStyle.indexOf(':')).trim()\n          if (next[key] == null) style[key] = null\n        }\n      }\n    }\n    for (const key in next) {\n      style[key] = next[key]\n    }\n  } else {\n    if (isCssString) {\n      if (prev !== next) {\n      }\n    } else if (prev) {\n      el.removeAttribute('style')\n    }\n  }\n}\n", "type EventValue = Function\n\ninterface Invoker extends EventListener {\n  value: EventValue\n}\n\nexport function addEventListener(\n  el: Element,\n  event: string,\n  handler: Invoker,\n): void {\n  el.addEventListener(event, handler)\n}\n\nexport function removeEventListener(\n  el: Element,\n  event: string,\n  handler: Invoker,\n): void {\n  el.removeEventListener(event, handler)\n}\n\n// vei = vue event invokers\nconst veiKey: unique symbol = Symbol('_vei')\n\nexport function patchEvent(\n  el: Element & { [veiKey]?: Record<string, Invoker | undefined> },\n  rawName: string,\n  eventValue: EventValue,\n): void {\n  const invokers = (el[veiKey] ??= {})\n  const existingInvoker = invokers[rawName]\n  if (eventValue && existingInvoker) {\n    // \u6362\u7ED1\n    existingInvoker.value = eventValue\n  } else {\n    const name: string = rawName.slice(2).toLowerCase()\n    if (eventValue) {\n      // \u8D4B\u503C\n      const invoker = (invokers[rawName] = createInvoker(eventValue))\n      addEventListener(el, name, invoker)\n    } else if (existingInvoker) {\n      // \u6E05\u7A7A\n      removeEventListener(el, name, existingInvoker)\n      invokers[rawName] = undefined\n    }\n  }\n}\n\nfunction createInvoker(eventValue: EventValue): Invoker {\n  /**\n   * \u521B\u5EFA\u4E00\u4E2A\u4E8B\u4EF6\u5904\u7406\u51FD\u6570\uFF0C\u5185\u90E8\u8C03\u7528 invoker.value\n   * \u5982\u679C\u9700\u8981\u66F4\u65B0\u4E8B\u4EF6\uFF0C\u90A3\u540E\u9762\u76F4\u63A5\u4FEE\u6539 invoker.value \u5C31\u5B8C\u6210\u4E8B\u4EF6\u6362\u7ED1\n   */\n  const invoker = (e: Event) => invoker.value(e)\n  invoker.value = eventValue\n  return invoker\n}\n", "export function patchAttr(el: Element, key: string, value: any) {\n  if (value == undefined) {\n    el.removeAttribute(key)\n  } else {\n    el.setAttribute(key, value)\n  }\n}\n", "import { patchClass } from './modules/patchClass'\nimport { RendererOptions } from './renderer'\nimport { isOn } from './general'\nimport { patchStyle } from './modules/patchStyle'\nimport { patchEvent } from './modules/patchEvent'\nimport { patchAttr } from './modules/patchAttr'\n\ntype DOMRendererOptions = RendererOptions<Node, Element>\n\n/**\n * 1. class\n * 2. style\n * 3. event\n * 4. attrs\n * @param el\n * @param key\n * @param prevValue\n * @param nextValue\n */\nexport const patchProp: DOMRendererOptions['patchProp'] = (\n  el,\n  key,\n  prevValue,\n  nextValue,\n) => {\n  if (key === 'class') {\n    patchClass(el, nextValue)\n  } else if (key === 'style') {\n    patchStyle(el, prevValue, nextValue)\n  } else if (isOn(key)) {\n    patchEvent(el, key, nextValue)\n  } else {\n    patchAttr(el, key, nextValue)\n  }\n}\n", "import { ReactiveEffect as Effect } from './effect'\nimport { ComputedRefImpl as Computed } from './computed'\n\n/**\n * \u4F9D\u8D56\u9879\n */\nexport interface Dependency {\n  subsHead: Link | undefined\n  subsTail: Link | undefined\n}\n\nexport interface Subscriber {\n  tracking: boolean\n  dirty: boolean\n  depsHead: Link | undefined\n  depsTail: Link | undefined\n}\n\n/**\n * \u94FE\u8868\u8282\u70B9\n */\nexport interface Link {\n  sub: Subscriber | Effect | Computed\n  nextSub: Link | undefined\n  prevSub: Link | undefined\n  dep: Dependency | Computed\n  nextDep: Link | undefined\n}\n\nlet linkPool: Link\n\n/**\n * \u8282\u70B9\n * @param dep \u5F53\u524D\u7684 ref\n * @param sub \u4E34\u65F6\u8BA2\u9605\u4E8B\u4EF6\n */\nexport function link(dep: Dependency, sub: Subscriber): Link | undefined {\n  //region \u94FE\u8868\u590D\u7528\n  const currentDep = sub.depsTail\n\n  const nextDep = currentDep === undefined ? sub.depsHead : currentDep.nextDep\n  if (nextDep?.dep === dep) {\n    sub.depsTail = nextDep\n    return\n  }\n\n  /**\n   * \u770B\u4E00\u4E0B linkPool \u6709\u6CA1\u6709\uFF0C\u5982\u679C\u6709\uFF0C\u5C31\u590D\u7528\n   */\n  let newLink: Link\n  if (linkPool) {\n    newLink = linkPool\n    linkPool = linkPool.nextDep\n    newLink.nextDep = nextDep\n    newLink.dep = dep\n    newLink.sub = sub\n  } else {\n    // \u5982\u679C\u6709\uFF0C\u5C31\u521B\u5EFA\u65B0\u8282\u70B9\n    newLink = {\n      sub,\n      nextSub: undefined,\n      prevSub: undefined,\n      dep,\n      nextDep,\n    }\n  }\n  //endregion\n\n  //region \u5C06\u94FE\u8868\u8282\u70B9\u548C dep \u5EFA\u7ACB\u5173\u8054\u5173\u7CFB\n  // \u5C06\u8282\u70B9\u653E\u5165\u672C ref \u7684\u8BA2\u9605\u8005\u94FE\u8868\u4E2D\n  if (dep.subsTail) {\n    // \u5982\u679C\u6709\u5C3E\u8282\u70B9 => \u4E0D\u662F\u5934\u8282\u70B9 => \u5728\u94FE\u8868\u540E\u9762\u52A0\u5165\n    dep.subsTail.nextSub = newLink\n    newLink.prevSub = dep.subsTail\n    dep.subsTail = newLink\n  } else {\n    // \u5982\u679C\u65E0\u5C3E\u8282\u70B9 => \u662F\u5934\u8282\u70B9 => \u8BBE\u7F6E\u4E3A\u5934\u8282\u70B9\n    dep.subsHead = newLink\n    dep.subsTail = newLink\n  }\n  //endregion\n\n  //region \u5C06\u94FE\u8868\u8282\u70B9\u548C sub \u5EFA\u7ACB\u5173\u8054\u5173\u7CFB\n  // \u5C06\u8282\u70B9\u653E\u5165\u672C ref \u7684\u4F9D\u8D56\u9879\u94FE\u8868\u4E2D\n  if (sub.depsTail) {\n    // \u5982\u679C\u6709\u5C3E\u8282\u70B9 => \u4E0D\u662F\u5934\u8282\u70B9 => \u5728\u94FE\u8868\u540E\u9762\u52A0\u5165\n    sub.depsTail.nextDep = newLink\n    sub.depsTail = newLink\n  } else {\n    // \u5982\u679C\u65E0\u5C3E\u8282\u70B9 => \u662F\u5934\u8282\u70B9 => \u8BBE\u7F6E\u4E3A\u5934\u8282\u70B9\n    sub.depsHead = newLink\n    sub.depsTail = newLink\n  }\n  //endregion\n}\n\nfunction processComputedUpdate(sub: Computed) {\n  /**\n   * \u66F4\u65B0\u8BA1\u7B97\u5C5E\u6027\n   * 1. \u8C03\u7528 update\n   * 2. \u901A\u77E5 subs \u94FE\u8868\u4E0A\u6240\u6709\u7684 sub\uFF0C\u91CD\u65B0\u6267\u884C\n   */\n  if (sub.subsHead && sub.update()) {\n    propagate(sub.subsHead)\n  }\n}\n\n/**\n * \u4F20\u64AD\u66F4\u65B0\u7684\u51FD\u6570\n * @param subs\n */\nexport function propagate(subs: Link) {\n  let link = subs\n  let queuedEffect = []\n  while (link) {\n    const sub = link.sub\n    if (!sub.tracking && !sub.dirty) {\n      sub.dirty = true\n      if ('update' in sub) {\n        processComputedUpdate(sub)\n      } else {\n        queuedEffect.push(sub)\n      }\n    }\n    link = link.nextSub\n  }\n  queuedEffect.forEach(effect => effect.notify())\n}\n\n/**\n * \u5F00\u59CB\u8FFD\u8E2A\u4F9D\u8D56\uFF0C\u5C06 depsTail\uFF0C\u5C3E\u8282\u70B9\u8BBE\u7F6E\u6210 undefined\n * @param sub\n */\nexport function startTracking(sub: Subscriber): void {\n  sub.tracking = true\n  sub.depsTail = undefined\n}\n\n/**\n * \u7ED3\u675F\u8FFD\u8E2A\u4F9D\u8D56\uFF0C\u627E\u5230\u9700\u8981\u6E05\u7406\u7684\u4F9D\u8D56\uFF0C\u65AD\u5F00\u5173\u8054\u5173\u7CFB\n * @param sub\n */\nexport function endTracking(sub: Subscriber): void {\n  sub.tracking = false\n  const depsTail = sub.depsTail\n  sub.dirty = false\n  /**\n   * depsTail \u6709\uFF0C\u5E76\u4E14\u8FD8\u6709 nextDep\uFF0C\u6211\u4EEC\u5E94\u8BE5\u628A\u5B83\u4EEC\u7684\u4F9D\u8D56\u5173\u7CFB\u6E05\u9664\n   * depsTail \u6CA1\u6709\uFF0C\u5E76\u4E14\u5934\u8282\u70B9\u6709\uFF0C\u90A3\u5C31\u628A\u6240\u6709\u7684\u90FD\u6E05\u7406\u6389\n   */\n  if (depsTail) {\n    if (depsTail.nextDep) {\n      clearTracking(depsTail.nextDep)\n      depsTail.nextDep = undefined\n    }\n  } else if (sub.depsHead) {\n    clearTracking(sub.depsHead)\n    sub.depsHead = undefined\n  }\n}\n\n/**\n * \u6E05\u9664\u8FFD\u8E2A\n * @param link\n */\nexport function clearTracking(link: Link) {\n  while (link) {\n    const { nextDep, nextSub, dep, prevSub } = link\n\n    /**\n     * \u5982\u679C prevSub \u6709\uFF0C\u90A3\u5C31\u628A prevSub = nextSub\n     * \u5982\u679C\u6CA1\u6709\uFF0C\u90A3\u5C31\u662F\u5934\u8282\u70B9\uFF0C\u90A3\u5C31\u628A dep.subs \u6307\u5411\u5F53\u524D\u8282\u70B9\u7684\u4E0B\u4E00\u4E2A\u8282\u70B9\n     */\n    if (prevSub) {\n      prevSub.nextSub = nextSub\n      link.nextSub = undefined\n    } else {\n      dep.subsHead = nextSub\n    }\n\n    /**\n     * \u5982\u679C nextSub \u6709\uFF0C\u90A3\u5C31\u628A nextSub = prevSub\n     * \u5982\u679C\u6CA1\u6709\uFF0C\u90A3\u5C31\u662F\u5C3E\u8282\u70B9\uFF0C\u90A3\u5C31\u628A dep.depsTail \u6307\u5411\u5F53\u524D\u8282\u70B9\u7684\u4E0A\u4E00\u4E2A\u8282\u70B9\n     */\n    if (nextSub) {\n      nextSub.prevSub = prevSub\n      link.prevSub = undefined\n    } else {\n      dep.subsTail = prevSub\n    }\n\n    link.dep = link.sub = undefined\n\n    // \u628A\u4E0D\u8981\u7684\u8282\u70B9\u7ED9 linkPool\n    link.nextDep = linkPool\n    linkPool = link\n\n    link = nextDep\n  }\n}\n", "// \u4E34\u65F6\u9700\u8981\u6267\u884C\u7684\u8BA2\u9605\u4E8B\u4EF6\nimport { endTracking, Link, startTracking, Subscriber } from './system'\n\nexport class ReactiveEffect<T = any> implements Subscriber {\n  depsHead: Link | undefined\n  depsTail: Link | undefined\n  tracking: boolean = false\n  dirty: boolean = false\n  // \u8868\u793A\u8FD9\u4E2A effect \u662F\u5426\u6FC0\u6D3B\n  active: boolean = true\n\n  constructor(public fn: () => T) {}\n\n  run(): T {\n    if (!this.active) {\n      return this.fn()\n    }\n    const prevSub: Subscriber | undefined = activeSub\n\n    // \u6BCF\u6B21\u6267\u884C fn \u4E4B\u524D\uFF0C\u628A this \u653E\u5230 activeSub \u4E0A\u9762\n    setActiveSub(this)\n    startTracking(this)\n    try {\n      return this.fn()\n    } finally {\n      // \u6267\u884C\u5B8C\u6210\u540E\uFF0C\u6062\u590D\u4E4B\u524D\u7684 activeSub\n      setActiveSub(prevSub)\n      endTracking(this)\n    }\n  }\n\n  /**\n   * \u901A\u77E5\u66F4\u65B0\u7684\u65B9\u6CD5\uFF0C\u5982\u679C\u4F9D\u8D56\u7684\u6570\u636E\u53D1\u751F\u53D8\u5316\uFF0C\u4F1A\u8C03\u7528\u8FD9\u4E2A\u51FD\u6570\n   */\n  notify() {\n    this.scheduler()\n  }\n\n  /**\n   * \u9ED8\u8BA4\u8C03\u7528 run\uFF0C\u5982\u679C\u7528\u6237\u4F20\u4E86\uFF0C\u90A3\u4EE5\u7528\u6237\u7684\u4E3A\u4E3B\n   */\n  scheduler() {\n    this.run()\n  }\n\n  stop() {\n    if (this.active) {\n      // \u6E05\u7406\u4F9D\u8D56\n      startTracking(this)\n      endTracking(this)\n      this.active = false\n    }\n  }\n}\n\n/**\n * \u8BA2\u9605 ref\n * @param fn \u8BA2\u9605\u4E8B\u4EF6\n * @param options\n */\nexport function effect<T = any>(fn: () => T, options?: any) {\n  const e = new ReactiveEffect(fn)\n  // scheduler\n  Object.assign(e, options)\n\n  e.run()\n\n  // \u7ED1\u5B9A\u51FD\u6570\u7684 this\n  const runner = e.run.bind(e)\n  // \u628A effect \u7684\u5B9E\u4F8B\uFF0C\u653E\u5230\u51FD\u6570\u5C5E\u6027\u4E2D\n  runner.effect = e\n  return runner\n}\n\nexport let activeSub: Subscriber | undefined = undefined\n\nexport function setActiveSub(sub: Subscriber | undefined): void {\n  activeSub = sub\n}\n", "import { activeSub } from './effect'\nimport { type Dependency, type Link, link, propagate } from './system'\nimport { isArray } from '@vue/shared'\n\nclass Dep implements Dependency {\n  subsHead: Link\n  subsTail: Link\n}\n\ntype KeyToDepMap = Map<any, Dep>\n\nconst targetMap: WeakMap<object, KeyToDepMap> = new WeakMap()\n\nexport function track(target: object, key: any): void {\n  if (!activeSub) return\n\n  let depsMap = targetMap.get(target)\n\n  if (!depsMap) {\n    depsMap = new Map()\n    targetMap.set(target, depsMap)\n  }\n\n  let dep = depsMap.get(key)\n\n  if (!dep) {\n    dep = new Dep()\n    depsMap.set(key, dep)\n  }\n\n  link(dep, activeSub)\n}\n\nexport function trigger(target: object, key: any): void {\n  const depsMap = targetMap.get(target)\n  if (!depsMap) return\n\n  const targetArray = isArray(target)\n  if (targetArray && key === 'length') {\n    /**\n     * \u66F4\u65B0\u6570\u636E\u7684 length\n     * \u66F4\u65B0\u524D\uFF1Alength = 4 => ['a','b','c','d']\n     * \u66F4\u65B0\u524D\uFF1Alength = 2 => ['a','b']\n     * \u5F97\u51FA\u7ED3\u8BBA\uFF1A\u8981\u901A\u77E5 \u8BBF\u95EE\u4E86 c \u548C d \u7684 effect \u91CD\u65B0\u6267\u884C\uFF0C\u5C31\u662F\u8BBF\u95EE\u4E86>= length \u7684\u7D22\u5F15\n     * depsMap = {\n     *   0:Dep,\n     *   1:Dep,\n     *   2:Dep,\n     *   3:Dep,\n     *   length:Dep\n     * }\n     */\n    const length = target.length\n    depsMap.forEach((dep, depKey) => {\n      if (depKey >= length || depKey === 'length') {\n        /**\n         * \u901A\u77E5 >= length \u7684 effect \u91CD\u65B0\u6267\u884C\n         * \u548C \u8BBF\u95EE\u4E86 length \u7684 effect \u91CD\u65B0\u6267\u884C\n         */\n        propagate(dep.subsHead)\n      }\n    })\n  } else {\n    // \u4E0D\u662F\u6570\u7EC4\uFF0C\u6216\u8005\u662F\u6570\u7EC4\u66F4\u65B0\u7684\u4E0D\u662F length\n    const dep = depsMap.get(key)\n    if (!dep) return\n\n    propagate(dep.subsHead)\n  }\n}\n", "import { track, trigger } from './dep'\nimport { hasChanged, isArray, isObject } from '@vue/shared'\nimport { isRef } from './ref'\nimport { reactive } from './reactive'\n\nclass BaseReactiveHandler implements ProxyHandler<object> {\n  get(target: object, key: string | symbol, receiver: any) {\n    // \u6536\u96C6\u4F9D\u8D56\uFF0C\u7ED1\u5B9A target \u4E2D\u67D0\u4E00\u4E2A key \u548C sub \u4E4B\u95F4\u7684\u5173\u7CFB\n    track(target, key)\n\n    const res = Reflect.get(target, key, receiver)\n    if (isRef(res)) return res.value\n    // \u5982\u679C\u4F20\u6765\u7684\u662F\u4E2A reactive({a: {b: 0}})\n    if (isObject(res)) return reactive(res)\n    return res\n  }\n}\n\nclass MutableReactiveHandler extends BaseReactiveHandler {\n  set(target: any, key: string | symbol, newValue: any, receiver: any) {\n    const oldValue = target[key]\n\n    const targetIsArray = isArray(target)\n    const oldLength = targetIsArray ? target.length : 0\n\n    // target = reactive({a:ref(0)}) ==> target.a = 1 ==> a.value = 1\n    if (isRef(oldValue) && !isRef(newValue)) {\n      oldValue.value = newValue\n      return true\n    }\n    // \u89E6\u53D1\u66F4\u65B0\uFF0Cset \u7684\u65F6\u5019\uFF0C\u901A\u77E5\u4E4B\u524D\u7684\u4F9D\u8D56\uFF0C\u91CD\u65B0\u6267\u884C\n    const res = Reflect.set(target, key, newValue, receiver)\n\n    if (hasChanged(newValue, oldValue)) trigger(target, key)\n\n    /**\n     * \u9690\u5F0F\u66F4\u65B0 length\n     * \u66F4\u65B0\u524D\uFF1Alength = 4 => ['a', 'b', 'c', 'd']\n     * \u66F4\u65B0\u540E\uFF1Alength = 5 => ['a', 'b', 'c', 'd', 'e']\n     * \u66F4\u65B0\u52A8\u4F5C\uFF0C\u4EE5 push \u4E3A\u4F8B\uFF0C\u8FFD\u52A0\u6709\u4E2A e\n     */\n    const newLength = targetIsArray ? target.length : 0\n\n    if (targetIsArray && newLength !== oldLength && key !== 'length') {\n      trigger(target, 'length')\n    }\n\n    return res\n  }\n}\n\nexport const mutableHandlers: ProxyHandler<object> =\n  new MutableReactiveHandler()\n", "import { isObject } from '@vue/shared'\nimport { mutableHandlers } from './baseHandlers'\n\nexport function reactive(target: object) {\n  return createReactiveObject(target)\n}\n\n// 1.1 \u4FDD\u5B58 target \u548C \u54CD\u5E94\u5F0F\u5BF9\u8C61\u4E4B\u95F4\u7684\u5173\u8054\u5173\u7CFB\nconst reactiveMap = new WeakMap()\n// 2.1 \u4FDD\u5B58\u6240\u6709\u4F7F\u7528 reactive \u521B\u5EFA\u51FA\u6765\u7684\u54CD\u5E94\u5F0F\u5BF9\u8C61\nconst reactiveSet = new WeakSet()\n\nfunction createReactiveObject(target: object) {\n  // reactive \u5FC5\u987B\u63A5\u53D7\u4E00\u4E2A\u5BF9\u8C61\n  if (!isObject(target)) return target\n\n  // 1.2 \u9632\u6B62\u4E00\u4E2A target \u88AB\u591A\u6B21 reactive\n  const existedProxy = reactiveMap.get(target)\n  if (existedProxy) return existedProxy\n\n  // 2.2 \u9632\u6B62\u4E00\u4E2A \u54CD\u5E94\u5F0F\u5BF9\u8C61\u518D\u6B21\u88AB reactive\n  if (isReactive(target)) return target\n\n  // \u521B\u5EFA target \u7684\u4EE3\u7406\u5BF9\u8C61\n  const proxy = new Proxy(target, mutableHandlers)\n\n  // 1.3 \u4FDD\u5B58 target \u548C proxy\u4E4B\u95F4\u7684\u5173\u8054\u5173\u7CFB\n  reactiveMap.set(target, proxy)\n  // 2.3 \u4FDD\u5B58\u6240\u6709 reactive \u4E2D\n  reactiveSet.add(proxy)\n  return proxy\n}\n\nexport function isReactive(target: object) {\n  return reactiveSet.has(target)\n}\n", "import { activeSub } from './effect'\nimport { type Dependency, type Link, link, propagate } from './system'\nimport { hasChanged, isObject } from '@vue/shared'\nimport { reactive } from './reactive'\nimport { ReactiveFlags } from './constants'\nimport { ComputedRef } from './computed'\n\nexport interface Ref<T = any, S = T> {\n  get value(): T\n\n  set value(_: S)\n}\n\nclass RefImpl<T = any> implements Dependency {\n  _value: T\n\n  subsHead: Link\n  subsTail: Link\n\n  public readonly [ReactiveFlags.IS_REF] = true\n\n  constructor(value: T) {\n    this._value = isObject(value) ? (reactive(value as object) as T) : value\n  }\n\n  get value() {\n    trackRef(this)\n    return this._value\n  }\n\n  set value(newValue) {\n    if (hasChanged(newValue, this._value)) {\n      this._value = isObject(newValue)\n        ? (reactive(newValue as object) as T)\n        : newValue\n      triggerRef(this)\n    }\n  }\n}\n\nexport function ref(value: unknown) {\n  return new RefImpl(value)\n}\n\n/**\n * \u6536\u96C6\u8BA2\u9605\n * @param dep\n */\nexport function trackRef(dep: RefImpl) {\n  if (activeSub) link(dep, activeSub)\n}\n\n/**\n * \u89E6\u53D1 ref \u5173\u8054\u7684\u6240\u6709 effect\n * @param dep\n */\nexport function triggerRef(dep: RefImpl) {\n  if (dep.subsHead) {\n    propagate(dep.subsHead)\n  }\n}\n\nclass ObjectRefImpl<T extends object, K extends keyof T> {\n  [ReactiveFlags.IS_REF] = true\n\n  constructor(\n    public _object: T,\n    public _key: K,\n  ) {}\n\n  get value() {\n    return this._object[this._key]\n  }\n\n  set value(newVal) {\n    this._object[this._key] = newVal\n  }\n}\n\nexport function unref<T>(ref: Ref<T> | ComputedRef<T>): T {\n  return isRef(ref) ? ref.value : ref\n}\n\nexport function isRef(r: any): r is Ref {\n  return r ? r[ReactiveFlags.IS_REF] === true : false\n}\n\nexport function toRef(target: Record<string, any>, key: string) {\n  return new ObjectRefImpl(target, key)\n}\n\nexport function toRefs(target: Record<string, any>) {\n  const res = {}\n\n  for (const key in target) {\n    res[key] = new ObjectRefImpl(target, key)\n  }\n\n  return res\n}\n\nexport function proxyRefs<T extends object>(target: T) {\n  return new Proxy(target, {\n    get(...args) {\n      const res = Reflect.get(...args)\n      return unref(res as any)\n    },\n    set(target, key, newValue, receiver) {\n      const oldValue = target[key]\n\n      if (isRef(oldValue) && !isRef(newValue)) {\n        oldValue.value = newValue\n        return true\n      }\n\n      return Reflect.set(target, key, newValue, receiver)\n    },\n  })\n}\n", "import { hasChanged, isFunction } from '@vue/shared'\nimport {\n  Dependency,\n  endTracking,\n  link,\n  Link,\n  startTracking,\n  Subscriber,\n} from './system'\nimport { ReactiveFlags } from './constants'\nimport { activeSub, setActiveSub } from './effect'\nimport { Ref } from './ref'\n\ninterface BaseComputedRef<T, S = T> extends Ref<T, S> {\n  effect: ComputedRefImpl\n}\n\nexport interface ComputedRef<T = any> extends BaseComputedRef<T> {\n  readonly value: T\n}\n\nexport type ComputedGetter<T> = (oldValue?: T) => T\nexport type ComputedSetter<T> = (newValue: T) => void\n\nexport interface WritableComputedOptions<T, S = T> {\n  get: ComputedGetter<T>\n  set: ComputedSetter<S>\n}\n\nexport class ComputedRefImpl<T = any> implements Dependency, Subscriber {\n  _value: T | undefined = undefined\n  // Dependency\n  subsHead: Link | undefined\n  subsTail: Link | undefined\n  // Subscriber\n  depsHead: Link | undefined\n  depsTail: Link | undefined;\n\n  [ReactiveFlags.IS_REF] = true\n  tracking: Boolean | undefined = false\n  dirty = true\n\n  constructor(\n    public fn: ComputedGetter<T>,\n    private readonly setter: ComputedSetter<T> | undefined,\n  ) {}\n\n  get value(): T {\n    if (this.dirty) {\n      this.update()\n    }\n    // \u8981\u548C sub \u505A\u5173\u8054\u5173\u7CFB\n    if (activeSub) link(this, activeSub)\n\n    return this._value\n  }\n\n  set value(newValue) {\n    if (this.setter) {\n      this._value = newValue\n    } else {\n      console.warn('readonly')\n    }\n  }\n\n  update(): boolean {\n    const prevSub: Subscriber | undefined = activeSub\n\n    // \u6BCF\u6B21\u6267\u884C fn \u4E4B\u524D\uFF0C\u628A this \u653E\u5230 activeSub \u4E0A\u9762\n    setActiveSub(this)\n    startTracking(this)\n    try {\n      const oldValue = this._value\n      this._value = this.fn()\n      return hasChanged(oldValue, this._value)\n    } finally {\n      // \u6267\u884C\u5B8C\u6210\u540E\uFF0C\u6062\u590D\u4E4B\u524D\u7684 activeSub\n      setActiveSub(prevSub)\n      endTracking(this)\n    }\n  }\n}\n\n/**\n * \u8BA1\u7B97\u5C5E\u6027\n * @param getterOrOptions\n */\nexport function computed<T>(\n  getterOrOptions: ComputedGetter<T> | WritableComputedOptions<T>,\n) {\n  let getter: ComputedGetter<T>\n  let setter: ComputedSetter<T> | undefined\n\n  if (isFunction(getterOrOptions)) {\n    getter = getterOrOptions\n  } else {\n    getter = getterOrOptions.get\n    setter = getterOrOptions.set\n  }\n\n  return new ComputedRefImpl(getter, setter)\n}\n", "import { ReactiveEffect } from './effect'\nimport { isRef, Ref } from './ref'\nimport { ComputedRef } from './computed'\nimport { isFunction, isObject } from '@vue/shared'\nimport { isReactive } from './reactive'\n\nexport type OnCleanup = (cleanupFn: () => void) => void\nexport type WatchEffect = (onCleanup: OnCleanup) => void\nexport type WatchSource<T = any> = Ref<T, any> | ComputedRef<T> | (() => T)\nexport type WatchCallback<V = any, OV = any> = (\n  value: V,\n  oldValue: OV,\n  onCleanup?: OnCleanup,\n) => any\n\nexport interface WatchOptions<Immediate = boolean> {\n  immediate?: Immediate\n  deep?: boolean | number\n  once?: boolean\n}\n\nexport function watch(\n  source: WatchSource | WatchSource[] | WatchEffect | object,\n  cb?: WatchCallback | null,\n  options: WatchOptions = {},\n) {\n  let { immediate, once, deep } = options\n\n  if (once) {\n    const _cb = cb\n    cb = (...args) => {\n      _cb(...args)\n      stop()\n    }\n  }\n  let getter: () => any\n  if (isRef(source)) {\n    getter = () => source.value\n  } else if (isReactive(source)) {\n    getter = () => source\n    if (!deep) deep = true\n  } else if (isFunction(source)) {\n    getter = source as () => any\n  }\n\n  if (deep) {\n    const baseGetter = getter\n    const depth = deep === true ? Infinity : deep\n    getter = () => traverse(baseGetter(), depth)\n  }\n\n  let oldValue: any\n\n  let cleanup = null\n\n  function onCleanup(cb) {\n    cleanup = cb\n  }\n\n  function job() {\n    if (cleanup) {\n      // \u6E05\u7406\u4E0A\u4E00\u6B21\u7684\u526F\u4F5C\u7528\n      cleanup()\n      cleanup = null\n    }\n\n    // \u6267\u884C effect.run \u62FF\u5230 getter \u7684\u8FD4\u56DE\u503C\uFF0C\u4E0D\u80FD\u76F4\u63A5\u6267\u884C getter\uFF0C\u56E0\u4E3A\u8981\u6536\u96C6\u4F9D\u8D56\n    const newValue = effect.run()\n    // \u6267\u884C\u7528\u6237\u56DE\u8C03\uFF0C\u628A newValue \u548C oldValue \u4F20\u8FDB\u53BB\n    cb(newValue, oldValue, onCleanup)\n    // \u4E0B\u4E00\u6B21\u7684 oldValue \u5C31\u7B49\u4E8E\u8FD9\u4E00\u6B21\u7684 newValue\n    oldValue = newValue\n  }\n\n  const effect = new ReactiveEffect(getter)\n\n  effect.scheduler = job\n\n  if (immediate) {\n    job()\n  } else {\n    // \u62FF\u5230 oldValue,\u5E76\u4E14\u6536\u96C6\u4F9D\u8D56\n    oldValue = effect.run()\n  }\n\n  function stop() {\n    effect.stop()\n  }\n\n  return stop\n}\n\nfunction traverse(\n  value: unknown,\n  depth: number = Infinity,\n  seen: Set<unknown> = new Set(),\n) {\n  if (depth <= 0 || !isObject(value) || seen.has(value)) return value\n\n  depth--\n  seen.add(value)\n\n  for (const key in value) {\n    traverse(value[key], depth, seen)\n  }\n\n  return value\n}\n", "import { RendererNode } from './renderer'\nimport { Ref } from '@vue/reactivity'\nimport { isArray, isString, ShapeFlags } from '@vue/shared'\n\nexport type VNodeRef = string | Ref\nexport type VNodeTypes = string\n\nexport type VNodeProps = {\n  key?: PropertyKey\n  ref?: VNodeRef\n  ref_for?: boolean\n  ref_key?: string\n}\ntype VNodeChildAtom =\n  | VNode\n  | string\n  | number\n  | boolean\n  | null\n  | undefined\n  | void\n\nexport type VNodeArrayChildren = Array<VNodeArrayChildren | VNodeChildAtom>\n\nexport type VNodeNormalizedChildren = VNodeChildAtom | VNodeArrayChildren\n\nexport interface VNode<\n  HostNode = RendererNode,\n  ExtraProps = { [key: string]: any },\n> {\n  __v_isVNode: true\n\n  type: VNodeTypes\n  props: (VNodeProps & ExtraProps) | null\n  key: PropertyKey | null\n  children: VNodeNormalizedChildren\n\n  // DOM\n  el: HostNode | null\n\n  // optimization only\n  shapeFlag: number\n}\n\n/**\n * \u521B\u5EFA\u865A\u62DF\u8282\u70B9\u7684\u5E95\u5C42\u65B9\u6CD5\n * @param type \u8282\u70B9\u7C7B\u578B\n * @param props \u8282\u70B9\u5C5E\u6027\n * @param children \u5B50\u8282\u70B9\n */\nexport function createVNode(\n  type: VNodeTypes,\n  props: VNodeProps,\n  children: unknown = null,\n): VNode {\n  let shapeFlag: number\n\n  if (isString(type)) {\n    shapeFlag = ShapeFlags.ELEMENT\n  }\n\n  if (isString(children)) {\n    shapeFlag |= ShapeFlags.TEXT_CHILDREN\n  } else if (isArray(children)) {\n    shapeFlag |= ShapeFlags.ARRAY_CHILDREN\n  }\n  const vnode = {\n    __v_isVNode: true,\n    type,\n    props,\n    children,\n    // \u505A diff \u7528\u7684\n    key: props?.key,\n    // \u865A\u62DF\u8282\u70B9\u8981\u6302\u8F7D\u7684\u5143\u7D20\n    el: null,\n    shapeFlag: shapeFlag,\n  } as VNode\n  return vnode\n}\n\nexport function isVNode(value: any) {\n  return value?.__v_isVNode\n}\n\nexport function isSameVNodeType(n1: VNode, n2: VNode): boolean {\n  return n1.type === n2.type && n1.key === n2.key\n}\n", "import { ShapeFlags } from '@vue/shared'\nimport { isSameVNodeType, VNode, VNodeArrayChildren } from './vnode'\n\nexport interface RendererNode {\n  [key: string | symbol]: any\n}\n\nexport interface RendererElement extends RendererNode {}\n\ntype Data = Record<string, unknown>\n\nexport interface RendererOptions<\n  HostNode = RendererNode,\n  HostElement = RendererElement,\n> {\n  patchProp(el: HostElement, key: string, prevValue: any, nextValue: any): void\n\n  insert(el: HostNode, parent: HostElement, anchor?: HostNode | null): void\n\n  remove(el: HostNode): void\n\n  createElement(type: string): HostElement\n\n  createText(text: string): HostNode\n\n  setText(node: HostNode, text: string): void\n\n  setElementText(node: HostElement, text: string): void\n\n  parentNode(node: HostNode): HostElement | null\n\n  nextSibling(node: HostNode): HostNode | null\n\n  querySelector?(selector: string): HostElement | null\n\n  setScopeId?(el: HostElement, id: string): void\n\n  cloneNode?(node: HostNode): HostNode\n}\n\nexport interface RendererElement extends RendererNode {}\n\nexport function createRenderer<\n  HostNode = RendererNode,\n  HostElement = RendererElement,\n>(options: RendererOptions<HostNode, HostElement>) {\n  return baseCreateRenderer(options)\n}\n\nfunction baseCreateRenderer(options: RendererOptions) {\n  const {\n    insert: hostInsert,\n    remove: hostRemove,\n    patchProp: hostPatchProp,\n    createElement: hostCreateElement,\n    setElementText: hostSetElementText,\n  } = options\n\n  const patch = (\n    n1: VNode,\n    n2: VNode,\n    container: RendererElement,\n    anchor: RendererNode = null,\n  ): void => {\n    /**\n     * \u66F4\u65B0\u548C\u6302\u8F7D\uFF0C\u90FD\u7528\u8FD9\u4E2A\u51FD\u6570\n     * @param n1 \u8001\u8282\u70B9\uFF0C\u4E4B\u524D\u7684\uFF0C\u5982\u679C\u6709\uFF0C\u8868\u793A\u8981\u4E2A n2 \u505A diff\uFF0C\u66F4\u65B0\uFF0C\u5982\u679C\u6CA1\u6709\uFF0C\u8868\u793A\u76F4\u63A5\u6302\u8F7D n2\n     * @param n2 \u65B0\u8282\u70B9\n     * @param container \u8981\u6302\u8F7D\u7684\u5BB9\u5668\n     */\n    if (n1 === n2) return\n\n    if (n1 && !isSameVNodeType(n1, n2)) {\n      // \u5982\u679C\u4E24\u4E2A\u8282\u70B9\u4E0D\u662F\u540C\u4E00\u4E2A\u7C7B\u578B\uFF0C\u90A3\u5C31\u5378\u8F7D n1 \u76F4\u63A5\u6302\u8F7D n2\n      unmount(n1)\n      n1 = null\n    }\n\n    if (n1 == null) {\n      // \u6302\u8F7D\n      mountElement(n2, container, anchor)\n    } else {\n      // \u66F4\u65B0\n      patchElement(n1, n2)\n    }\n  }\n\n  const patchProps = (el: RendererElement, oldProps: Data, newProps: Data) => {\n    /**\n     * 1. \u5220\u9664\u8001\u7684 props\n     * 2. \u65B0\u589E props\n     */\n    if (oldProps) {\n      // \u5220\u9664\u8001\u7684 props\n      for (const key in oldProps) {\n        hostPatchProp(el, key, oldProps[key], null)\n      }\n    }\n\n    if (newProps) {\n      // \u5220\u9664\u8001\u7684 props\n      for (const key in newProps) {\n        hostPatchProp(el, key, oldProps?.[key], newProps[key])\n      }\n    }\n  }\n\n  const patchChildren = (n1: VNode, n2: VNode) => {\n    const el = n2.el\n\n    const prevShapeFlag = n1.shapeFlag\n    const shapeFlag = n2.shapeFlag\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n      // \u65B0\u8282\u70B9\u662F \u6587\u672C\n      if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n        // \u8001\u8282\u70B9\u662F \u6570\u7EC4\n        unmountChildren(n1.children as VNode[])\n      }\n      if (n1.children !== n2.children) {\n        // \u8001\u8282\u70B9\u662F \u6587\u672C\n        hostSetElementText(el, n2.children as string)\n      }\n    } else {\n      // \u8001\u7684\u6709\u53EF\u80FD\u662F \u6570\u7EC4 \u6216\u8005 null\n      // \u65B0\u7684\u6709\u53EF\u80FD\u662F \u6570\u7EC4 \u6216\u8005 null\n      if (prevShapeFlag & ShapeFlags.TEXT_CHILDREN) {\n        // \u8001\u7684\u662F\u6587\u672C\n        // \u8001\u8282\u70B9\u662F \u6587\u672C | \u65B0\u8282\u70B9\u662F \u6570\u7EC4\n        hostSetElementText(el, '')\n        if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n          mountChildren(n2.children as VNode[], el)\n        }\n      } else {\n        // \u8001\u7684\u6570\u7EC4 \u6216\u8005 null\n        // \u65B0\u7684\u6570\u7EC4 \u6216\u8005 null\n        if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n          // \u8001\u7684\u662F\u6570\u7EC4\n          if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n            // \u65B0\u7684\u4E5F\u662F\u6570\u7EC4\n            patchKeyedChildren(\n              n1.children as VNode[],\n              n2.children as VNode[],\n              el,\n            )\n          } else {\n            // \u65B0\u7684\u4E0D\u662F\u6570\u7EC4\uFF0C\u5378\u8F7D\u8001\u7684\u6570\u7EC4\n            unmountChildren(n1.children as VNode[])\n          }\n        } else {\n          // \u8001\u7684\u662F null\uFF0C\u6302\u8F7D\u65B0\u7684\n          if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n            mountChildren(n2.children as VNode[], el)\n          }\n        }\n      }\n    }\n  }\n\n  const patchKeyedChildren = (\n    c1: VNode[],\n    c2: VNode[],\n    container: RendererElement,\n  ) => {\n    // \u5F00\u59CB\u5BF9\u6BD4\u7684\u4E0B\u6807\n    let i = 0\n    // \u8001\u7684\u5B50\u8282\u70B9\u7684\u6700\u540E\u4E00\u4E2A\u5143\u7D20\u7684\u4E0B\u6807\n    let e1 = c1.length - 1\n    // \u65B0\u7684\u5B50\u8282\u70B9\u7684\u6700\u540E\u4E00\u4E2A\u5143\u7D20\u7684\u4E0B\u6807\n    let e2 = c2.length - 1\n    /**\n     * 1.1 \u5934\u90E8\u5BF9\u6BD4\n     *   c1 => [a, b]\n     *   c2 => [a, b, c]\n     * \u5F00\u59CB\u65F6: i = 0, e1 = 0, e2 = 0\n     * \u7ED3\u675F\u65F6: i = 0, e1 = 2, e2 = 1\n     */\n    while (i <= e1 && i <= e2) {\n      const n1 = c1[i]\n      const n2 = c2[i]\n\n      if (isSameVNodeType(n1, n2)) {\n        // \u5982\u679C n1 \u548C n2 \u662F\u540C\u4E00\u4E2A\u7C7B\u578B\u7684\u5B50\u8282\u70B9,\u76F4\u63A5 patch\n        patch(n1, n2, container)\n      } else {\n        break\n      }\n\n      i++\n    }\n    /**\n     * 1.2 \u5C3E\u90E8\u5BF9\u6BD4\n     *  c1 => [a, b]\n     *  c2 => [c, a, b]\n     * \u5F00\u59CB\u65F6: i = 0, e1 = 1, e2 = 2\n     * \u7ED3\u675F\u65F6: i = 0, e1 = -1, e2 = 0\n     */\n    while (i <= e1 && i <= e2) {\n      const n1 = c1[e1]\n      const n2 = c2[e2]\n\n      if (isSameVNodeType(n1, n2)) {\n        // \u5982\u679C n1 \u548C n2 \u662F\u540C\u4E00\u4E2A\u7C7B\u578B\u7684\u5B50\u8282\u70B9,\u76F4\u63A5 patch\n        patch(n1, n2, container)\n      } else {\n        break\n      }\n\n      e1--\n      e2--\n    }\n    if (i > e1) {\n      // \u8868\u793A\u8001\u7684\u5C11,\u65B0\u7684\u591A,\u8981\u6302\u8F7D\u65B0\u7684,\u8303\u56F4 i - e2\n      const nextPos = e2 + 1\n      const anchor = nextPos < c2.length ? c2[nextPos].el : null\n      while (i <= e2) {\n        patch(null, c2[i++], container, anchor)\n      }\n    } else if (i > e2) {\n      // \u8868\u793A\u8001\u7684\u591A,\u65B0\u7684\u5C11,\u8981\u5378\u8F7D\u8001\u7684,\u8303\u56F4 i - e1\n      while (i <= e1) {\n        unmount(c1[i++])\n      }\n    } else {\n      /**\n       * 2. \u4E71\u5E8F\n       * c1 => [a, (b, c, d), e]\n       * c2 => [a, (c, d, b), e]\n       * \u5F00\u59CB\u65F6: i = 0, e1 = 4, e2 = 4\n       * \u53CC\u7AEF\u5BF9\u6BD4\u5B8C\u7ED3\u679C: i = 1, e1 = 3, e2 = 3\n       */\n      let s1 = i\n      let s2 = i\n      /**\n       * \u505A\u4E00\u4EFD\u65B0\u7684\u5B50\u8282\u70B9\u7684 key \u548C index \u4E4B\u95F4\u7684\u6620\u5C04\u5173\u7CFB\n       * map = {\n       *   c:1,\n       *   d:2,\n       *   b:3\n       * }\n       */\n      const keyToNewIndexMap = new Map()\n\n      for (let j = s2; j <= e2; j++) {\n        const n2 = c2[j]\n        keyToNewIndexMap.set(n2.key, j)\n      }\n      // \u904D\u5386\u8001\u7684\u5B50\u8282\u70B9\n      for (let j = s1; j <= e1; j++) {\n        const n1 = c1[j]\n        // \u770B\u4E00\u4E0B\u8FD9\u4E2A key \u5728\u65B0\u7684\u91CC\u9762\u6709\u6CA1\u6709\n        const newIndex = keyToNewIndexMap.get(n1.key)\n        if (newIndex != null) {\n          // \u5982\u679C\u6709,\u5C31patch\n          patch(n1, c2[newIndex], container)\n        } else {\n          // \u5982\u679C\u6CA1\u6709,\u8868\u793A\u8001\u7684\u6709,\u65B0\u7684\u6CA1\u6709\n          unmount(n1)\n        }\n      }\n\n      for (let j = e2; j >= s2; j--) {\n        // \u5012\u5E8F\u5BFC\u5165\n        const n2 = c2[j]\n        const anchor = c2[j + 1]?.el || null\n\n        if (n2.el) {\n          hostInsert(n2.el, container, anchor)\n        } else {\n          patch(null, n2, container, anchor)\n        }\n      }\n    }\n    console.log('i,e1,e2 ==> ', i, e1, e2)\n  }\n\n  const patchElement = (n1: VNode, n2: VNode) => {\n    /**\n     * \u590D\u7528 DOM \u5143\u7D20\n     * \u66F4\u65B0 props\n     * \u66F4\u65B0 children\n     */\n    // \u590D\u7528 DOM \u5143\u7D20\n    const el = (n2.el = n1.el)\n\n    // \u66F4\u65B0 props\n    const oldProps = n1.props\n    const newProps = n2.props\n    patchProps(el, oldProps, newProps)\n\n    // \u66F4\u65B0 children\n    patchChildren(n1, n2)\n  }\n\n  const mountElement = (\n    vnode: VNode,\n    container: RendererElement,\n    anchor: RendererNode = null,\n  ) => {\n    /**\n     * 1. \u521B\u5EFA\u4E00\u4E2A DOM \u8282\u70B9\n     * 2. \u8BBE\u7F6E props\n     * 3. \u6302\u8F7D\u5B50\u8282\u70B9\n     */\n    const { type, props, children, shapeFlag } = vnode\n    // \u521B\u5EFA DOM \u5143\u7D20 type = div p span\n    const el = hostCreateElement(type)\n    vnode.el = el\n    // \u5904\u7406 props\n    if (props) {\n      for (const key in props) {\n        hostPatchProp(el, key, null, props[key])\n      }\n    }\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n      // \u5B50\u8282\u70B9\u662F\u6587\u672C\n      hostSetElementText(el, children as string)\n    } else {\n      // \u5B50\u8282\u70B9\u662F\u6570\u7EC4\n      if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n        mountChildren(children as VNode[], el)\n      }\n    }\n    hostInsert(el, container, anchor)\n  }\n\n  const mountChildren = (children: VNodeArrayChildren, el: RendererElement) => {\n    for (const child of children) patch(null, child as VNode, el)\n  }\n\n  const unmountChildren = (children: VNodeArrayChildren) => {\n    for (const child of children) unmount(child as VNode)\n  }\n\n  const unmount = (vnode: VNode) => {\n    const { children, shapeFlag } = vnode\n    if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n      unmountChildren(children as VNode[])\n    }\n    hostRemove(vnode.el)\n  }\n\n  const render = (vnode: VNode, container: RendererElement) => {\n    if (vnode == null) {\n      if (container._vnode) {\n        // \u5378\u8F7D\n        unmount(container._vnode)\n      }\n    } else {\n      // \u6302\u8F7D & \u66F4\u65B0\n      patch(container._vnode || null, vnode, container)\n    }\n\n    container._vnode = vnode\n  }\n  return {\n    render,\n  }\n}\n", "/*\n// type only\nh('div')\n\n// type + props\nh('div', {})\n\n// type + omit props + children\n// Omit props does NOT support named slots\nh('div', []) // array\nh('div', 'foo') // text\nh('div', h('br')) // vnode\nh(Component, () => {}) // default slot\n\n// type + props + children\nh('div', {}, []) // array\nh('div', {}, 'foo') // text\nh('div', {}, h('br')) // vnode\nh(Component, {}, () => {}) // default slot\nh(Component, {}, {}) // named slots\n\n// named slots without props requires explicit `null` to avoid ambiguity\nh(Component, null, {})\n**/\n\nimport { isArray, isObject } from '@vue/shared'\nimport { createVNode, isVNode, VNode } from './vnode'\n\nexport function h(type: any, propsOrChildren?: any, children?: any): VNode {\n  /**\n   * h \u51FD\u6570\uFF0C\u4E3B\u8981\u7684\u4F5C\u7528\u662F\u5BF9\u4E00\u4E2A createVNode \u505A\u4E00\u4E2A\u53C2\u6570\u5F52\u4E00\u5316\n   */\n  let l = arguments.length\n\n  if (l === 2) {\n    if (isArray(propsOrChildren)) {\n      // h('div', []) // array\n      return createVNode(type, null, propsOrChildren)\n    }\n    if (isObject(propsOrChildren)) {\n      if (isVNode(propsOrChildren)) {\n        // h('div', h('br')) // vnode\n        return createVNode(type, null, [propsOrChildren])\n      }\n      // h('div', {}) // props\n      return createVNode(type, propsOrChildren, children)\n    }\n    // h('div', 'foo') // text\n    return createVNode(type, null, propsOrChildren)\n  } else {\n    if (l > 3) {\n      // h('div', {}, h('br'), h('br')) // vnode\n      children = [...arguments].slice(2)\n    } else if (l === 3 && isVNode(children)) {\n      // h('div', {}, h('br')) // vnode\n      children = [children]\n    }\n    return createVNode(type, propsOrChildren, children)\n  }\n}\n", "import { nodeOps } from './nodeOps'\nimport { patchProp } from './patchProp'\nimport { createRenderer } from '@vue/runtime-core'\n\nexport * from '@vue/runtime-core'\n\nconst renderOps = { patchProp, ...nodeOps }\n\nconst renderer = createRenderer(renderOps)\n\nexport function render(vnode, container) {\n  renderer.render(vnode, container)\n}\n\nexport { renderOps }\n"],
  "mappings": "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",
  "names": ["link", "effect", "ref", "target", "cb", "effect", "render"]
}
